var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};const TcHmi=window.TcHmi;import{TcHmiControl,TcHmiRegion}from"Beckhoff.TwinCAT.HMI.Framework/index.esm.js";import{TcHmiBreadcrumb}from"../dist/TcHmiBreadcrumb.esm.js";let TcHmiAccordionNavigation=(()=>{var _a;let ___onItemSelected_decorators,___onBackButtonClick_decorators,___onBackButtonDown_decorators,___onBackButtonLeave_decorators,___onBackButtonEnter_decorators,___onDocumentUp_decorators,___onItemDownChanged_decorators,___onUserDataChanged_decorators,___onResized_decorators,___onRegionContentChanged_decorators,___breadcrumbCallbackFunction_decorators,___onResolverForNavigationStructureWatchCallback_decorators,_classSuper=TcHmiControl,_instanceExtraInitializers=[];return class TcHmiAccordionNavigation extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onItemSelected_decorators=[TcHmi.EventHandler()],___onBackButtonClick_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onBackButtonDown_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onBackButtonLeave_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onBackButtonEnter_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onDocumentUp_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onItemDownChanged_decorators=[TcHmi.EventHandler()],___onUserDataChanged_decorators=[TcHmi.EventHandler()],___onResized_decorators=[TcHmi.EventHandler()],___onRegionContentChanged_decorators=[TcHmi.EventHandler()],___breadcrumbCallbackFunction_decorators=[TcHmi.EventHandler()],___onResolverForNavigationStructureWatchCallback_decorators=[(_a=TcHmi).CallbackMethod.bind(_a)],__esDecorate(this,null,___onItemSelected_decorators,{kind:"method",name:"__onItemSelected",static:!1,private:!1,access:{has:obj=>"__onItemSelected"in obj,get:obj=>obj.__onItemSelected},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onBackButtonClick_decorators,{kind:"method",name:"__onBackButtonClick",static:!1,private:!1,access:{has:obj=>"__onBackButtonClick"in obj,get:obj=>obj.__onBackButtonClick},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onBackButtonDown_decorators,{kind:"method",name:"__onBackButtonDown",static:!1,private:!1,access:{has:obj=>"__onBackButtonDown"in obj,get:obj=>obj.__onBackButtonDown},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onBackButtonLeave_decorators,{kind:"method",name:"__onBackButtonLeave",static:!1,private:!1,access:{has:obj=>"__onBackButtonLeave"in obj,get:obj=>obj.__onBackButtonLeave},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onBackButtonEnter_decorators,{kind:"method",name:"__onBackButtonEnter",static:!1,private:!1,access:{has:obj=>"__onBackButtonEnter"in obj,get:obj=>obj.__onBackButtonEnter},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onDocumentUp_decorators,{kind:"method",name:"__onDocumentUp",static:!1,private:!1,access:{has:obj=>"__onDocumentUp"in obj,get:obj=>obj.__onDocumentUp},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onItemDownChanged_decorators,{kind:"method",name:"__onItemDownChanged",static:!1,private:!1,access:{has:obj=>"__onItemDownChanged"in obj,get:obj=>obj.__onItemDownChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onUserDataChanged_decorators,{kind:"method",name:"__onUserDataChanged",static:!1,private:!1,access:{has:obj=>"__onUserDataChanged"in obj,get:obj=>obj.__onUserDataChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResized_decorators,{kind:"method",name:"__onResized",static:!1,private:!1,access:{has:obj=>"__onResized"in obj,get:obj=>obj.__onResized},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onRegionContentChanged_decorators,{kind:"method",name:"__onRegionContentChanged",static:!1,private:!1,access:{has:obj=>"__onRegionContentChanged"in obj,get:obj=>obj.__onRegionContentChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___breadcrumbCallbackFunction_decorators,{kind:"method",name:"__breadcrumbCallbackFunction",static:!1,private:!1,access:{has:obj=>"__breadcrumbCallbackFunction"in obj,get:obj=>obj.__breadcrumbCallbackFunction},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForNavigationStructureWatchCallback_decorators,{kind:"method",name:"__onResolverForNavigationStructureWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForNavigationStructureWatchCallback"in obj,get:obj=>obj.__onResolverForNavigationStructureWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.BaseTemplate."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot=__runInitializers(this,_instanceExtraInitializers);__elementBaseAccordion;__elementBackButton;__navigationItems;__newNavigationData=!1;__targetRegion;__breadcrumb;__autoCollapse;__closeWhenClicked;__showBackButton;__textFontSize;__textFontSizeUnit;__idCounter=0;__activeItem;__breakpoint;__smallMode=!1;__pageHistory=[];__regionChangeEvent;__localizedElements=new Map;__localizationReader=void 0;__previouslyOpenedElementIds=[];__previouslyActiveElementId=null;__destroyOnMouseUp=[];__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiAccordionNavigation-Template")[0],this.__elementBaseAccordion=this.__elementTemplateRoot.querySelector("tchmi-accordion"),this.__elementBackButton=this.__elementTemplateRoot.getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiAccordionNavigation-Back-Button")[0],!this.__elementTemplateRoot||!this.__elementBaseAccordion||!this.__elementBackButton)throw new Error("Invalid Template.html");let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyOnDestroy.push(this.__localization.watch(data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}})),super.__previnit()}__init(){super.__init(),this.__addLocalizedElement(this.__elementBackButton,"Button_Back")}__attach(){super.__attach(),this.__elementBaseAccordion.addItemClickedCallback(this.__onItemSelected),this.__elementBaseAccordion.addItemDownChangedCallback(this.__onItemDownChanged),this.__elementBaseAccordion.setAutoCollapse(this.__autoCollapse??!0),this.__destroyOnDetach.push(TcHmi.EventProvider.register("onUserDataChanged",this.__onUserDataChanged),TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized),TcHmi.EventProvider.registerDomEvent(this.__elementBackButton,"click",this.__onBackButtonClick),TcHmi.EventProvider.registerDomEvent(this.__elementBackButton,"pointerdown",this.__onBackButtonDown))}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}__addLocalizedElement(element,key,...parameters){let info={key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}__createNavigationLevel(items,accordionElement,even=!0){for(let item of items){let observeAccessId=item.id+":observe",operateAccessId=item.id+":operate";if(!TcHmi.Access.checkAccess(this,observeAccessId))continue;let content,header=this.__createHeaderElement(item);if(item.subItems?.length){content=document.createElement("tchmi-accordion-content");let subAccordion=new TcHmi.Controls.Helpers.TcHmiAccordion.Accordion;subAccordion.classList.toggle("even",even),subAccordion.addItemClickedCallback(this.__onItemSelected),subAccordion.addItemDownChangedCallback(this.__onItemDownChanged),subAccordion.setAutoCollapse(this.__autoCollapse??!0),this.__createNavigationLevel(item.subItems,subAccordion,!even),content.append(subAccordion)}const addedItem=accordionElement.addItem(item.id,header,content);addedItem&&(TcHmi.Access.checkAccess(this,operateAccessId)||addedItem.disable(!0),addedItem.setCloseWhenClicked(this.__closeWhenClicked??!1))}}__destroyNavigation(){if(this.__navigationItems)for(let item of this.__navigationItems)this.__elementBaseAccordion.removeItemByName(item.id)}__createHeaderElement(item){let headerElement=document.createElement("tchmi-accordion-header");if(headerElement.setAttribute("title",item.name),TcHmi.StyleProvider.processFontSize(headerElement,this.__textFontSize,this.__textFontSizeUnit),item.icon){let icon=document.createElement("i");icon.style.height=(item.iconHeight??48)+(item.iconHeightUnit??"px"),icon.style.minWidth=(item.iconWidth??48)+(item.iconWidthUnit??"px"),TcHmi.StyleProvider.processBackground(icon,{image:item.icon,imageHeight:item.iconHeight??48,imageHeightUnit:item.iconHeightUnit,imageWidth:item.iconWidth??48,imageWidthUnit:item.iconWidthUnit}),headerElement.append(icon)}if(!this.__smallMode){let nameElement=document.createElement("span");nameElement.textContent=item.name,headerElement.append(nameElement)}return headerElement}__updateHeaderIcon(navigationItem){let accordionItem=this.__getAccordionItemById(navigationItem.id);if(!accordionItem)return;let headerElement=accordionItem?.getHeader();if(!headerElement)return;let icon=headerElement.querySelector("i");if(!icon)return;let path=navigationItem.icon??"";accordionItem.hasAttribute("active")&&navigationItem.iconActive?path=navigationItem.iconActive:headerElement.classList.contains("down")&&navigationItem.iconPressed&&(path=navigationItem.iconPressed),icon.style.backgroundImage='url("'+tchmi_path(path)+'")'}__onItemSelected(item){const name=item.getName();if(!name)return;const selectedItem=this.__getNavigationItemById(name);selectedItem&&(selectedItem.content&&(this.__activeItem=selectedItem,this.__updateDisplayOfActiveItem(item),this.__setRegionContent(this.__activeItem),this.__pageHistory.unshift(this.__activeItem.id),this.__pageHistory.length>100&&this.__pageHistory.pop()),this.__callFunction(selectedItem),this.__createBreadcrumb(),selectedItem.content&&TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActiveItem"}),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"BreadcrumbPath"}))}__updateDisplayOfActiveItem(activeItem){let oldItems=this.__elementTemplateRoot.querySelectorAll("tchmi-accordion-item[active]");for(let oldItem of oldItems){if(oldItem===activeItem)continue;oldItem.removeAttribute("active");const oldItemName=oldItem.getName();if(!oldItemName)continue;const oldNavigationItem=this.__getNavigationItemById(oldItemName);oldNavigationItem&&this.__updateHeaderIcon(oldNavigationItem)}activeItem.hasAttribute("active")||(activeItem.setAttribute("active",""),this.__activeItem&&this.__updateHeaderIcon(this.__activeItem))}__setRegionContent(item){this.__targetRegion&&(item&&item.content?item.content&&this.__targetRegion.getTargetContent()!==item.content&&this.__targetRegion.setTargetContent(item.content):this.__targetRegion.setTargetContent(null))}__callFunction(item){if(!item.function)return;let itemFunction=new TcHmi.Function(item.function);itemFunction.isProcessedAsync()?TcHmi.Log.Controls.error(this,TcHmiAccordionNavigation.#tchmiFQN,`Execution of function=${item.function.fn} was aborted because it will be processed asynchronous and a synchronous running function call is required. Either the function is running asynchronous by definition or asynchronous running symbols were added to the list of parameters.`):itemFunction.executeEx(void 0,data=>{data.error!==TcHmi.Errors.NONE&&TcHmi.Log.Controls.error(this,TcHmiAccordionNavigation.#tchmiFQN,`Execution of function=${item.function.fn} failed with error: ${TcHmi.Log.buildMessage(data.details)}`)})}__onBackButtonClick(){if(!this.__showBackButton||this.__pageHistory.length<=1)return;this.__pageHistory.shift();let activeNavigationItem=this.__getNavigationItemById(this.__pageHistory[0]);activeNavigationItem?.content&&(this.__setActiveItem(activeNavigationItem),this.__setRegionContent(activeNavigationItem),this.__updateHeaderIcon(activeNavigationItem))}__onBackButtonDown(){this.__showBackButton&&(this.__elementBackButton.classList.add("down"),TcHmi.EventProvider.registerDomEvent(document,"pointerup",this.__onDocumentUp,{once:!0}),this.__destroyOnMouseUp.push(TcHmi.EventProvider.registerDomEvent(this.__elementBackButton,"pointerleave",this.__onBackButtonLeave,{once:!0})))}__onBackButtonLeave(){this.__showBackButton&&(this.__elementBackButton.classList.remove("down"),this.__destroyOnMouseUp.push(TcHmi.EventProvider.registerDomEvent(this.__elementBackButton,"pointerenter",this.__onBackButtonEnter,{once:!0})))}__onBackButtonEnter(){this.__showBackButton&&(this.__elementBackButton.classList.add("down"),this.__destroyOnMouseUp.push(TcHmi.EventProvider.registerDomEvent(this.__elementBackButton,"pointerleave",this.__onBackButtonLeave,{once:!0})))}__onDocumentUp(){this.__elementBackButton.classList.remove("down");for(const destroyer of this.__destroyOnMouseUp)destroyer();this.__destroyOnMouseUp=[]}__onItemDownChanged(item){if(item.hasAttribute("active"))return;const name=item.getName();if(!name)return;const navigationItem=this.__getNavigationItemById(name);navigationItem&&this.__updateHeaderIcon(navigationItem)}__getNavigationItemById(id,items=this.__navigationItems){if(!items||!id)return null;for(let item of items){if(item.id===id)return item;if(item.subItems){let foundItem=this.__getNavigationItemById(id,item.subItems);if(foundItem)return foundItem}}return null}__getAccordionItemById(id){return this.__elementTemplateRoot.querySelector('tchmi-accordion-item[name="'+id+'"]')}__getOpenElementIds(){let openElements=this.__elementBaseAccordion.querySelectorAll("tchmi-accordion-item[open]"),ids=[];return openElements.forEach(item=>{const id=item.getName();id&&ids.push(id)}),ids}__onUserDataChanged(){if(this.__previouslyOpenedElementIds=this.__getOpenElementIds(),this.__previouslyActiveElementId=this.__elementBaseAccordion.querySelector("tchmi-accordion-item[active]")?.getName()??null,this.__previouslyActiveElementId){let observeAccess=TcHmi.Access.checkAccess(this,this.__previouslyActiveElementId+":observe"),operateAccess=TcHmi.Access.checkAccess(this,this.__previouslyActiveElementId+":operate");if((!observeAccess||!operateAccess)&&(this.__previouslyActiveElementId=null,this.__navigationItems))for(let item of this.__navigationItems){const subObserveAccess=TcHmi.Access.checkAccess(this,item.id+":observe"),subOperateAccess=TcHmi.Access.checkAccess(this,item.id+":operate");if(subObserveAccess&&subOperateAccess){this.__previouslyActiveElementId=item.id;break}}}this.__destroyNavigation(),this.__processNavigationItems(),this.__setRegionContent(this.__getNavigationItemById(this.__previouslyActiveElementId))}__onResized(){this.__checkBreakpoint()}__checkBreakpoint(){const width=this.getRenderedWidth();if(null!==width){if(!this.__breakpoint||width>this.__breakpoint){if(!this.__smallMode)return;this.__smallMode=!1,this.__element[0].classList.remove("TcHmi_Controls_BaseTemplate_TcHmiAccordionNavigation-small-mode"),this.__addLocalizedElement(this.__elementBackButton,"Button_Back")}else{if(this.__smallMode)return;this.__smallMode=!0,this.__element[0].classList.add("TcHmi_Controls_BaseTemplate_TcHmiAccordionNavigation-small-mode"),this.__removeLocalizedElement(this.__elementBackButton),this.__elementBackButton.textContent=""}this.__previouslyOpenedElementIds=this.__getOpenElementIds(),this.__previouslyActiveElementId=this.__elementBaseAccordion.querySelector("tchmi-accordion-item[active]")?.getName()??null,this.__destroyNavigation(),this.__processNavigationItems()}}__onRegionContentChanged(){if(!this.__targetRegion)return;let contentName=this.__targetRegion.getTargetContent();if(!contentName||contentName===this.__activeItem?.content)return;let item=this.__getItemByContentName(contentName);item&&this.__setActiveItem(item)}__getItemByContentName(contentName){if(!this.__navigationItems)return null;const searchLevel=items=>{for(let item of items){if(item.content===contentName)return item;if(item.subItems){let result=searchLevel(item.subItems);if(result)return result}}return null};return searchLevel(this.__navigationItems)}__setActiveItem(item){this.__activeItem=item;let accordionItem=this.__getAccordionItemById(item.id);accordionItem&&(this.__updateDisplayOfActiveItem(accordionItem),this.showItem(item.id)),this.__createBreadcrumb(),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActiveItem"}),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"BreadcrumbPath"})}__getParentItem(item){const accordionitem=this.__getAccordionItemById(item.id);if(accordionitem){let parentAccordion=accordionitem.parentElement?.parentElement?.parentElement;if(parentAccordion instanceof TcHmi.Controls.Helpers.TcHmiAccordion.AccordionItem)return parentAccordion}return null}__createBreadcrumb(){if(this.__breadcrumb&&this.__navigationItems){let bcItems=this.__getBreadcrumbItems(this.__navigationItems);bcItems&&this.__breadcrumb.setBreadcrumbDataEx(bcItems,this.__breadcrumbCallbackFunction)}}__breadcrumbCallbackFunction(code){const selectedItem=this.__getNavigationItemById(code);selectedItem?.content&&(this.__setActiveItem(selectedItem),this.__targetRegion?.setTargetContent(selectedItem.content))}__getBreadcrumbItems(element){let breadcrumbData=[];if(!this.__activeItem)return null;this.__activeItem.content&&breadcrumbData.push({text:this.__activeItem.name,code:this.__activeItem.id,isEnabled:!0});let parentElement=this.__getNavigationItemById(this.__getParentItem(this.__activeItem)?.getName()??null);for(;null!==parentElement;)(breadcrumbData.length>0||parentElement.content)&&breadcrumbData.unshift({text:parentElement.name,code:parentElement.id,isEnabled:void 0!==parentElement.content}),parentElement=this.__getNavigationItemById(this.__getParentItem(parentElement)?.getName()??null);return breadcrumbData}getAccessConfig(){const currentAccessConfig=super.getAccessConfig();return this.__getSubRights(this.__navigationItems??[],tchmi_clone_object(currentAccessConfig))}__getSubRights(items,accessList){if(!items)return accessList;for(const element of items){if(element.accessRights)for(const elementAccessRight of element.accessRights)if(elementAccessRight){let curAccess={accessright:element.id+":"+elementAccessRight.accessright,group:elementAccessRight.group,permission:elementAccessRight.permission};accessList.push(curAccess)}if(element.subItems&&accessList){let accessListTmp=this.__getSubRights(element.subItems,accessList);accessListTmp&&(accessList=accessListTmp)}}return accessList}getDescriptionAccessByName(name){return name.includes(":")?{name,defaultValueInternal:!0}:null}showItem(id){if(!this.__navigationItems)return;const searchLevel=items=>{for(let item of items){if(item.id===id)return item;if(item.subItems){let result=searchLevel(item.subItems);if(null!==result)return result}}return null},item=searchLevel(this.__navigationItems);if(item){const accordionItem=this.__getNavigationItemById(item.id),navigationItem=this.__getAccordionItemById(item.id);if(accordionItem){const parentItem=this.__getParentItem(accordionItem);parentItem&&parentItem?.open(null)}for(let[_baseItemName,baseItem]of this.__elementBaseAccordion.getItems())baseItem.contains(navigationItem)||baseItem===navigationItem||baseItem.close()}}getActiveItem(){return this.__activeItem}setNavigationItems(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("NavigationItems"));let resolverInfo=this.__objectResolvers.get("navigationItems");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy()),this.__newNavigationData=!0;let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("NavigationItems")?.type});this.__objectResolvers.set("navigationItems",{resolver,watchCallback:this.__onResolverForNavigationStructureWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForNavigationStructureWatchCallback)})}__onResolverForNavigationStructureWatchCallback(data){this.__isAttached||this.__suspendObjectResolver("navigationItems"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__navigationItems)||(this.__previouslyOpenedElementIds=this.__getOpenElementIds(),this.__previouslyActiveElementId=this.__elementBaseAccordion.querySelector("tchmi-accordion-item[active]")?.getName()??null,this.__destroyNavigation(),this.__navigationItems=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"NavigationItems"}),this.__processNavigationItems()):TcHmi.Log.Controls.error(this,TcHmiAccordionNavigation.#tchmiFQN,{Attribute:"NavigationItems"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getNavigationItems(){return this.__navigationItems}__processNavigationItems(){if(this.__navigationItems?.length){if(this.__createNavigationLevel(this.__navigationItems,this.__elementBaseAccordion),this.__newNavigationData){if(this.__newNavigationData=!1,this.__pageHistory=[],this.__targetRegion){let content=this.__targetRegion.getTargetContent();if(content){const currentItem=this.__getItemByContentName(content);currentItem&&this.__pageHistory.unshift(currentItem.id)}else this.__pageHistory.unshift(this.__navigationItems[0].id)}else this.__pageHistory.unshift(this.__navigationItems[0].id);let startingId=this.__pageHistory[0];if(startingId){let startingItem=this.__getNavigationItemById(startingId);startingItem&&this.__setActiveItem(startingItem)}}else{for(let id of this.__previouslyOpenedElementIds)this.__elementBaseAccordion.querySelector(`tchmi-accordion-item[name=${id}]`)?.open(null);if(this.__previouslyActiveElementId){let activeAccordionItem=this.__getAccordionItemById(this.__previouslyActiveElementId);this.__activeItem=this.__getNavigationItemById(this.__previouslyActiveElementId),activeAccordionItem&&activeAccordionItem.setAttribute("active","");let activeNavigationItem=this.__getNavigationItemById(this.__previouslyActiveElementId);activeNavigationItem&&this.__updateHeaderIcon(activeNavigationItem)}else if(this.__pageHistory[0]){let activeAccordionItem=this.__getAccordionItemById(this.__pageHistory[0]);this.__activeItem=this.__getNavigationItemById(this.__pageHistory[0]),activeAccordionItem&&activeAccordionItem.setAttribute("active","");let activeNavigationItem=this.__getNavigationItemById(this.__pageHistory[0]);activeNavigationItem&&this.__updateHeaderIcon(activeNavigationItem)}}this.__createBreadcrumb()}}setTargetRegion(valueNew){let convertedValue=valueNew instanceof TcHmiRegion?valueNew:null;null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TargetRegion")),convertedValue!==this.__targetRegion&&(this.__targetRegion=valueNew,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TargetRegion"}),this.__processTargetRegion())}getTargetRegion(){return this.__targetRegion}__processTargetRegion(){this.__targetRegion?(this.__regionChangeEvent?.(),this.__regionChangeEvent=TcHmi.EventProvider.register(this.__targetRegion.getId()+".onTargetContentReplaced",this.__onRegionContentChanged),this.__activeItem&&this.__setRegionContent(this.__activeItem)):(this.__regionChangeEvent?.(),this.__regionChangeEvent=null)}setBreadcrumb(valueNew){let convertedValue=valueNew instanceof TcHmiBreadcrumb?valueNew:null;null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Breadcrumb")),convertedValue!==this.__breadcrumb&&(this.__breadcrumb=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Breadcrumb"}),this.__processBreadcrumb())}getBreadcrumb(){return this.__breadcrumb}__processBreadcrumb(){this.__createBreadcrumb(),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"BreadcrumbPath"})}getBreadcrumbPath(){if(!this.__navigationItems)return[];let bcItems=this.__getBreadcrumbItems(this.__navigationItems);return bcItems?bcItems.map(item=>item.text):[]}setAutoCollapse(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("AutoCollapse")),convertedValue!==this.__autoCollapse&&(this.__autoCollapse=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AutoCollapse"}),this.__processAutoCollapse())}getAutoCollapse(){return this.__autoCollapse}__processAutoCollapse(){let accordions=this.__elementTemplateRoot.querySelectorAll("tchmi-accordion");for(let accordion of accordions)accordion.setAutoCollapse(this.__autoCollapse??!0)}setCloseWhenClicked(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("CloseWhenClicked")),convertedValue!==this.__closeWhenClicked&&(this.__closeWhenClicked=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"CloseWhenClicked"}),this.__processCloseWhenClicked())}getCloseWhenClicked(){return this.__closeWhenClicked}__processCloseWhenClicked(){let accordionItems=this.__elementTemplateRoot.querySelectorAll("tchmi-accordion-item");for(let item of accordionItems)item.setCloseWhenClicked(this.__closeWhenClicked??!1)}setShowBackButton(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowBackButton")),convertedValue!==this.__showBackButton&&(this.__showBackButton=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowBackButton"}),this.__processShowBackButton())}getShowBackButton(){return this.__showBackButton}__processShowBackButton(){this.__elementBackButton.classList.toggle("disabled",!this.__showBackButton)}setBreakpoint(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Breakpoint")),convertedValue!==this.__breakpoint&&(this.__breakpoint=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Breakpoint"}),this.__processBreakpoint())}getBreakpoint(){return this.__breakpoint}__processBreakpoint(){this.__checkBreakpoint()}setTextFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSize")),convertedValue!==this.__textFontSize&&(this.__textFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSize"}),this.__processTextFontSize())}getTextFontSize(){return this.__textFontSize}__processTextFontSize(){let headerList=this.__elementTemplateRoot.querySelectorAll("tchmi-accordion-header");TcHmi.StyleProvider.processFontSize(headerList,this.__textFontSize,this.__textFontSizeUnit)}setTextFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toFontSizeUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),convertedValue!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSizeUnit"}),this.__processTextFontSize())}getTextFontSizeUnit(){return this.__textFontSizeUnit}}})();export{TcHmiAccordionNavigation};TcHmi.Controls.registerEx("TcHmiAccordionNavigation","TcHmi.Controls.BaseTemplate",TcHmiAccordionNavigation,{injectInGlobalObject:!0});