var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};const TcHmi=window.TcHmi;import{TcHmiControl}from"Beckhoff.TwinCAT.HMI.Framework/index.esm.js";let TcHmiHeader=(()=>{var _a,_b;let ___onResized_decorators,___onThemeDataChanged_decorators,___onUserDataChanged_decorators,___resizePopup_decorators,___onMouseUp_decorators,___onResolverForHeaderItemsWatchCallback_decorators,_classSuper=TcHmiControl,_instanceExtraInitializers=[];return class TcHmiHeader extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onResized_decorators=[TcHmi.EventHandler()],___onThemeDataChanged_decorators=[TcHmi.EventHandler()],___onUserDataChanged_decorators=[TcHmi.EventHandler()],___resizePopup_decorators=[(_a=TcHmi).CallbackMethod.bind(_a)],___onMouseUp_decorators=[TcHmi.EventHandler({checkIsEnabled:!0,checkAccess:"operate"})],___onResolverForHeaderItemsWatchCallback_decorators=[(_b=TcHmi).CallbackMethod.bind(_b)],__esDecorate(this,null,___onResized_decorators,{kind:"method",name:"__onResized",static:!1,private:!1,access:{has:obj=>"__onResized"in obj,get:obj=>obj.__onResized},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onThemeDataChanged_decorators,{kind:"method",name:"__onThemeDataChanged",static:!1,private:!1,access:{has:obj=>"__onThemeDataChanged"in obj,get:obj=>obj.__onThemeDataChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onUserDataChanged_decorators,{kind:"method",name:"__onUserDataChanged",static:!1,private:!1,access:{has:obj=>"__onUserDataChanged"in obj,get:obj=>obj.__onUserDataChanged},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___resizePopup_decorators,{kind:"method",name:"__resizePopup",static:!1,private:!1,access:{has:obj=>"__resizePopup"in obj,get:obj=>obj.__resizePopup},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onMouseUp_decorators,{kind:"method",name:"__onMouseUp",static:!1,private:!1,access:{has:obj=>"__onMouseUp"in obj,get:obj=>obj.__onMouseUp},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForHeaderItemsWatchCallback_decorators,{kind:"method",name:"__onResolverForHeaderItemsWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForHeaderItemsWatchCallback"in obj,get:obj=>obj.__onResolverForHeaderItemsWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.BaseTemplate."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot=__runInitializers(this,_instanceExtraInitializers);__elementTemplateLeft;__elementTemplateRight;__elementTemplateExpandableContainer;__headerItems;__expandedItems;__availableWidth;__elementMargin=32;__expandable;__expandableIsActive=!1;__expandContainerRows=0;__expandButton;__expandButtonSize=48;__dropDownBoxOpen=!1;__destroyOnRemovePopup=[];__newHeaderItemsValue;__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiHeader-Template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");if(this.__elementTemplateLeft=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiHeader-Template-Align-Left")[0],!this.__elementTemplateLeft)throw new Error("Invalid Template.html");if(this.__elementTemplateRight=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiHeader-Template-Align-Right")[0],!this.__elementTemplateRight)throw new Error("Invalid Template.html");this.__elementTemplateExpandableContainer=document.createElement("div"),this.__elementTemplateExpandableContainer.classList.add("TcHmi_Controls_BaseTemplate_TcHmiHeader-expandable-container"),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),void 0!==this.__newHeaderItemsValue&&(this.setHeaderItems(this.__newHeaderItemsValue),this.__newHeaderItemsValue=void 0),this.__createHeaderElements(),this.__destroyOnDetach.push(TcHmi.EventProvider.register("onThemeDataChanged",this.__onThemeDataChanged),TcHmi.EventProvider.register("onUserDataChanged",this.__onUserDataChanged),TcHmi.EventProvider.register(this.getId()+".onResized",this.__onResized))}__detach(){super.__detach(),this.__destroyHeaderItems();for(let destroyer of this.__destroyOnRemovePopup)destroyer();this.__destroyOnRemovePopup=[]}destroy(){this.__keepAlive||(this.__destroyHeaderItems(),super.destroy())}__destroyHeaderItems(){if(this.__headerItems)for(let item of this.__headerItems)item.eventDestroyFunction?.(),item.eventDestroyFunction=void 0,item.control?.destroy(),item.control=void 0}__createHeaderElements(){if(this.__headerItems)for(let item of this.__headerItems)if(item.displayed=!1,TcHmi.Access.checkAccess(this,item.id+":observe"))switch(item.itemType){case"EventLine":this.__createEventLine(item);break;case"UserManagement":this.__createUserManagement(item);break;case"Image":this.__createImage(item);break;case"Text":this.__createText(item);break;case"StateImage":this.__createStateImage(item);break;case"Time":this.__createTime(item);break;case"AdsState":this.__createAdsState(item);break;case"ThemeSelect":this.__createThemeSelect(item);break;case"LocalizationSelect":this.__createLocalizationSelect(item);break;default:TcHmi.Log.Controls.error(this,TcHmiHeader.#tchmiFQN,`Unknown header item type in header item ${item.id}.`)}this.__appendHeaderItems()}__processDefaultHeaderElementProperties(item){if(item.control){let prefHeight="%"!==item.prefHeightUnit?item.prefHeight:this.getRenderedHeight()*(item.prefHeight/100);item.control.setHeight(prefHeight),item.control.setHeightUnit("px");let prefWidth="%"!==item.prefWidthUnit?item.prefWidth:this.getRenderedWidth()*(item.prefWidth/100);item.control.setWidth(prefWidth),item.control.setWidthUnit("px"),item.control.setClassNames(item.classList),item.control.setAccessConfig(item.accessRights)}}__appendHeaderItems(){if(!this.__isAttached)return;if(this.__elementTemplateLeft.textContent="",this.__elementTemplateRight.textContent="",this.__removeExpandButton(),!this.__headerItems?.length)return;const renderedHeight=this.getRenderedHeight();if(!renderedHeight)return;const visibleItems=[];for(let item of this.__headerItems)item.control&&item.displayed&&("Left"===item.itemAlign?this.__elementTemplateLeft.append(item.control.getElement()[0]):this.__elementTemplateRight.append(item.control.getElement()[0]),visibleItems.push(item.control));for(let control of visibleItems)if(control.getElement()[0].clientHeight){let diff=renderedHeight-control.getElement()[0].clientHeight;if(diff<0)control.setHeight(renderedHeight);else{let top=diff/2;control.setTop(top),control.setTopUnit("px")}}}__removeHeaderItems(){if(this.__headerItems)for(let item of this.__headerItems)item.control?.getElement().remove(),item.displayed=!1}__resizeControl(){this.__setDropDownboxOpen(!1);const margin=getComputedStyle(this.__element[0]).getPropertyValue("--tchmi-item-margin");this.__elementMargin=parseFloat(margin),this.__expandableIsActive=!1,this.__availableWidth=this.getRenderedWidth()-this.__elementMargin,this.__checkForExpandedContainer(),this.__checkForFittingControls(),this.__appendHeaderItems(),this.__expandableIsActive&&(this.__appendExpandButton(),this.__appendExpandContainerControls()),this.__adaptControlSizes()}__checkForExpandedContainer(){if(this.__headerItems&&this.__availableWidth){let availableSpace=this.__availableWidth;for(let i=5;i>0;i--)for(let item of this.__headerItems)if(item.priority===i.toString()&&item.control&&TcHmi.Access.checkAccess(this,item.id+":observe")){let minWidth="%"!==item.minWidthUnit?item.minWidth:this.getRenderedWidth()*(item.minWidth/100);if(minWidth<availableSpace-this.__elementMargin)availableSpace=availableSpace-minWidth-this.__elementMargin;else if(("EventLine"===item.itemType||"UserManagement"===item.itemType||"Time"===item.itemType||"StateImage"===item.itemType||"AdsState"===item.itemType||"ThemeSelect"===item.itemType||"LocalizationSelect"===item.itemType)&&this.__expandable)return this.__expandableIsActive=!0,this.__expandButtonSize=this.__getAverageHeight(),void(this.__expandButtonSize&&(this.__availableWidth=this.__availableWidth-(this.__expandButtonSize+this.__elementMargin)))}}}__checkForFittingControls(){if(this.__headerItems&&(this.__expandedItems=[],this.__availableWidth)){let availableSpace=this.__availableWidth;for(let i=5;i>0;i--)for(let item of this.__headerItems)if(item.priority===i.toString()&&item.control&&TcHmi.Access.checkAccess(this,item.id+":observe")){let minWidth="%"!==item.minWidthUnit?item.minWidth:this.getRenderedWidth()*(item.minWidth/100);minWidth<availableSpace-this.__elementMargin?(availableSpace=availableSpace-minWidth-this.__elementMargin,item.displayed=!0):(item.displayed=!1,"EventLine"!==item.itemType&&"UserManagement"!==item.itemType&&"Time"!==item.itemType&&"StateImage"!==item.itemType&&"AdsState"!==item.itemType&&"ThemeSelect"!==item.itemType&&"LocalizationSelect"!==item.itemType||this.__expandedItems.push(item))}}}__adaptControlSizes(){if(!this.__headerItems)return;let allMins=0;for(let item of this.__headerItems)if(item.displayed&&item.minWidth){allMins=allMins+("%"!==item.minWidthUnit?item.minWidth:this.getRenderedWidth()*(item.minWidth/100))+this.__elementMargin}if(this.__availableWidth){let additionalSpace=this.__availableWidth-allMins;for(let i=5;i>0;i--)for(let item of this.__headerItems)if(item.priority===i.toString()&&item.displayed&&item.control){let prefWidth="%"!==item.prefWidthUnit?item.prefWidth:this.getRenderedWidth()*(item.prefWidth/100),minWidth="%"!==item.minWidthUnit?item.minWidth:this.getRenderedWidth()*(item.minWidth/100);additionalSpace>prefWidth-minWidth?(item.control.setWidth(prefWidth),additionalSpace-=prefWidth-minWidth,item.textElement&&item.textElement.classList.remove("not-displayed")):"StateImage"!==item.itemType&&"AdsState"!==item.itemType?(item.control.setWidth(minWidth+additionalSpace),additionalSpace=0):(item.control.setWidth(minWidth),item.textElement&&item.textElement.classList.add("not-displayed"))}}}__onResized(_event){this.__resizeControl()}__onThemeDataChanged(_event){this.__resizeControl()}__onUserDataChanged(_event){this.__removeHeaderItems(),this.__checkForExpandedContainer(),this.__checkForFittingControls(),this.__appendHeaderItems(),this.__expandableIsActive&&(this.__appendExpandButton(),this.__appendExpandContainerControls()),this.__adaptControlSizes()}__onElementClick(item){return _event=>{if(!this.getIsEnabled())return;if(!TcHmi.Access.checkAccess(this,"operate"))return;if(!item.targetRegion)return;const targetRegion=item.targetRegion;"string"==typeof targetRegion&&item.targetContent&&TcHmi.Symbol.isSymbolExpression(targetRegion)?TcHmi.Symbol.readEx2(targetRegion,data=>{if(data.error!==TcHmi.Errors.NONE)throw new Error("Failed to resolve symbol: "+targetRegion);{const regionControl=data.value;regionControl&&regionControl.setTargetContent(item.targetContent??null)}}):"string"!=typeof targetRegion&&targetRegion.setTargetContent(item.targetContent??null)}}__createExpandButton(){this.__expandButton||void 0===TcHmi.Controls.get(this.getId()+".ExpandHeaderButton")&&(this.__expandButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.getId()+".ExpandHeaderButton",null,this),this.__expandButton&&(this.__expandButton.setText("..."),this.__expandButton.setHeight(this.__expandButtonSize),this.__expandButton.setWidth(this.__expandButtonSize),this.__expandButton.setLeft(this.__elementMargin),this.__expandButton.setTextVerticalAlignment("Center"),this.__expandButton.setTextHorizontalAlignment("Center"),this.__expandButton.setIconVerticalAlignment("Center"),this.__expandButton.setIconHorizontalAlignment("Center"),this.__expandButton.getElement().addClass("expandbutton"),this.__destroyOnDetach.push(TcHmi.EventProvider.register(this.getId()+".ExpandHeaderButton.onPressed",this.__onMouseUp))))}__appendExpandButton(){this.__createExpandButton(),this.__expandButton&&this.__expandButtonSize&&(this.__adaptExpandButtonHeigth(),this.__elementTemplateRoot.append(this.__expandButton.getElement()[0]),this.__elementTemplateLeft.style.left=this.__elementMargin+this.__expandButtonSize+"px")}__adaptExpandButtonHeigth(){if(this.__expandButton&&this.__expandButtonSize&&this.getRenderedHeight()&&this.__expandButtonSize){let diff=this.getRenderedHeight()-this.__expandButtonSize;if(diff<0)this.__expandButton.setHeight(this.getRenderedHeight());else{let top=diff/2;this.__expandButton.setTop(top),this.__expandButton.setTopUnit("px")}}}__appendExpandContainerControls(){if(!this.__expandedItems)return;this.__elementTemplateExpandableContainer.textContent="";let containerWidth=document.documentElement.clientWidth-this.__elementMargin;this.__expandContainerRows=0;let appendedElements=[];if(this.__expandedItems&&this.__expandedItems.length>0)for(;appendedElements.length!==this.__expandedItems.length;){this.__expandContainerRows++;let rowWidthLeft=containerWidth;for(let item of this.__expandedItems){if(appendedElements.includes(item)||!item.control)continue;let prefWidth="%"!==item.prefWidthUnit?item.prefWidth:this.getRenderedWidth()*(item.prefWidth/100),minWidth="%"!==item.minWidthUnit?item.minWidth:this.getRenderedWidth()*(item.minWidth/100);if(rowWidthLeft>=prefWidth+this.__elementMargin)this.__elementTemplateExpandableContainer.append(item.control.getElement()[0]),appendedElements.push(item),item.control.setWidth(prefWidth),rowWidthLeft=rowWidthLeft-prefWidth-this.__elementMargin,item.textElement&&item.textElement.classList.remove("not-displayed");else if(rowWidthLeft>=minWidth+this.__elementMargin){if(this.__elementTemplateExpandableContainer.append(item.control.getElement()[0]),appendedElements.push(item),"StateImage"!==item.itemType&&"AdsState"!==item.itemType){item.control.setWidth(rowWidthLeft-this.__elementMargin);break}if(item.control.setWidth(minWidth),rowWidthLeft=rowWidthLeft-minWidth-this.__elementMargin,rowWidthLeft<this.__elementMargin)break;item.textElement&&item.textElement.classList.add("not-displayed")}else rowWidthLeft===containerWidth&&(appendedElements.push(item),TcHmi.Log.Controls.info(this,TcHmiHeader.#tchmiFQN,`It is not possible to display the control of the type ${item.itemType} with the id ${item.control.getId()}.`))}}}__removeExpandButton(){this.__expandButton&&this.__elementTemplateRoot&&(this.__expandButton.getElement().detach(),this.__elementTemplateLeft.style.left="0")}__getAverageHeight(){if(!this.__headerItems)return 48;let heightList=[];for(let item of this.__headerItems)item.prefHeight&&("%"===item.prefHeightUnit?heightList.push(this.getRenderedHeight()*(item.prefHeight/100)):heightList.push(item.prefHeight));return heightList.sort((a,b)=>a-b),heightList[Math.floor(heightList.length/2)]}__setDropDownboxOpen(valueNew){if(void 0===valueNew&&(valueNew=!this.__dropDownBoxOpen),valueNew){this.__dropDownBoxOpen=!0;let topMostLayerOptions={removeCb:data=>{this.__dropDownBoxOpen=!1;for(let destroyer of this.__destroyOnRemovePopup)destroyer();this.__destroyOnRemovePopup=[]},dimBackground:!1,modal:!0};this.__destroyOnRemovePopup.push(TcHmi.EventProvider.register(this.__id+".onResized",this.__resizePopup),TcHmi.EventProvider.register(this.__id+".onMoved",this.__resizePopup)),TcHmi.TopMostLayer.add(this,this.__elementTemplateExpandableContainer,topMostLayerOptions),this.__resizePopup()}else TcHmi.TopMostLayer.remove(this,this.__elementTemplateExpandableContainer)}__resizePopup(){const documentBCR=document.documentElement.getBoundingClientRect(),controlBCR=this.__element[0].getBoundingClientRect(),dropdownBCR=this.__elementTemplateExpandableContainer.getBoundingClientRect(),style={top:controlBCR.top+controlBCR.height+"px",left:"0",right:null,"min-width":documentBCR.width+"px",height:this.__expandContainerRows*controlBCR.height+"px"};documentBCR.height-controlBCR.bottom<this.__expandContainerRows*controlBCR.height&&controlBCR.top>=this.__expandContainerRows*controlBCR.height?(style.top=controlBCR.top-this.__expandContainerRows*controlBCR.height+"px",this.__elementTemplateExpandableContainer.classList.add("above-control")):this.__elementTemplateExpandableContainer.classList.remove("above-control"),documentBCR.width-controlBCR.left<dropdownBCR.width&&controlBCR.right>=dropdownBCR.width&&(style.left=null,style.right=documentBCR.width-controlBCR.right+"px"),TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTemplateExpandableContainer,style)}__onMouseUp(_event){this.__setDropDownboxOpen()}getAccessConfig(){const currentAccessConfig=super.getAccessConfig();return this.__getSubRights(this.__headerItems??[],tchmi_clone_object(currentAccessConfig))}__getSubRights(elements,accessList){if(!elements)return accessList;for(const element of elements)if(element.accessRights)for(const elementAccessRight of element.accessRights)if(elementAccessRight){let curAccess={accessright:element.id+":"+elementAccessRight.accessright,group:elementAccessRight.group,permission:elementAccessRight.permission};accessList.push(curAccess)}return accessList}getDescriptionAccessByName(name){return name.includes(":")?{name,defaultValueInternal:!0}:null}__createEventLine(item){if(void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiEventLine",this.getId()+"."+item.id,{"data-tchmi-message-format":item.messageFormat,"data-tchmi-filter":item.filter,"data-tchmi-sorting":item.sorting,"data-tchmi-target-content":item.targetContent??null,"data-tchmi-target-region":item.targetRegion instanceof TcHmi.Controls.System.TcHmiRegion?null:item.targetRegion??null,"data-tchmi-text-overflow":item.textOverflow??null},this),item.control)){let eventLine=item.control;eventLine&&item.targetRegion&&item.targetRegion instanceof TcHmi.Controls.System.TcHmiRegion&&eventLine.setTargetRegion(item.targetRegion),this.__processDefaultHeaderElementProperties(item),item.displayed=!0}}__createUserManagement(item){void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiUserManagement",this.getId()+"."+item.id,{"data-tchmi-allow-logout":item.allowLogout,"data-tchmi-allow-switch-user":item.allowSwitchUser},this),item.control&&(this.__processDefaultHeaderElementProperties(item),item.displayed=!0))}__createImage(item){if(void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiImage",this.getId()+"."+item.id,{"data-tchmi-src":item.image,"data-tchmi-alt":item.altText},this),item.control)){this.__processDefaultHeaderElementProperties(item);let image=item.control;item.targetRegion&&item.targetContent&&(item.eventDestroyFunction=TcHmi.EventProvider.register(image.getId()+".onPressed",this.__onElementClick(item))),item.displayed=!0}}__createText(item){if(void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.getId()+"."+item.id,{"data-tchmi-text":item.text},this),item.control)){this.__processDefaultHeaderElementProperties(item);let textblock=item.control;item.targetRegion&&item.targetContent&&(item.eventDestroyFunction=TcHmi.EventProvider.register(textblock.getId()+".onPressed",this.__onElementClick(item)));let element=textblock.getElement().find(".TcHmi_Controls_Beckhoff_TcHmiTextblock-template-text-container");element&&element.css("white-space","normal"),item.displayed=!0}}__createStateImage(item){if(void 0===TcHmi.Controls.get(this.getId()+"."+item.id)){if(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiStateImage",this.getId()+"."+item.id,{"data-tchmi-state":item.stateVar,"data-tchmi-state-list":item.stateList},this),item.iconWidth&&item.iconWidthUnit&&item.control){let iconWidth=item.iconWidth;if("%"===item.iconWidthUnit){iconWidth=("%"!==item.prefHeightUnit?item.prefHeight:this.getRenderedHeight()*(item.prefHeight/100))*(item.iconWidth/100)}item.control.getElement()[0].children[0].style.flexBasis=iconWidth+"px"}item.text&&""!==item.text&&(item.textElement=document.createElement("div"),item.textElement.classList.add("description-text"),item.textElement&&(item.textElement.textContent=item.text),"Left"===item.textPosition?item.control?.getElement()[0].children[0].before(item.textElement):"Right"===item.textPosition&&item.control?.getElement()[0].append(item.textElement)),this.__processDefaultHeaderElementProperties(item),item.displayed=!0}}__createAdsState(item){if(void 0===TcHmi.Controls.get(this.getId()+"."+item.id)){if(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiAdsState",this.getId()+"."+item.id,{"data-tchmi-ads-runtime":item.adsRuntime,"data-tchmi-server-interval":item.serverInterval??1e3,"data-tchmi-server-domain":item.serverDomain??"ADS","data-tchmi-state-images":item.stateImages??null},this),item.iconWidth&&item.iconWidthUnit&&item.control){let iconWidth=item.iconWidth;if("%"===item.iconWidthUnit){iconWidth=("%"!==item.prefHeightUnit?item.prefHeight:this.getRenderedHeight()*(item.prefHeight/100))*(item.iconWidth/100)}item.control.getElement()[0].children[0].style.flexBasis=iconWidth+"px"}item.text&&""!==item.text&&(item.textElement=document.createElement("div"),item.textElement.classList.add("description-text"),item.textElement.textContent=item.text,"Left"===item.textPosition?item.control?.getElement()[0].children[0].before(item.textElement):"Right"===item.textPosition&&item.control?.getElement()[0].append(item.textElement)),this.__processDefaultHeaderElementProperties(item),item.displayed=!0}}__createTime(item){void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDateTimeDisplay",this.getId()+"."+item.id,{"data-tchmi-time-display-layout":item.timeDisplayLayout},this),this.__processDefaultHeaderElementProperties(item),item.displayed=!0)}__createThemeSelect(item){void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiThemeSelect",this.getId()+"."+item.id,null,this),this.__processDefaultHeaderElementProperties(item),item.displayed=!0)}__createLocalizationSelect(item){void 0===TcHmi.Controls.get(this.getId()+"."+item.id)&&(item.control=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiLocalizationSelect",this.getId()+"."+item.id,{"data-tchmi-localization-mapping":item.localizationMapping},this),this.__processDefaultHeaderElementProperties(item),item.displayed=!0)}setHeaderItems(valueNew){if(!this.__isAttached)return void(this.__newHeaderItemsValue=valueNew);let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("HeaderItems"));let resolverInfo=this.__objectResolvers.get("HeaderItems");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("HeaderItems")?.type});this.__objectResolvers.set("headerItems",{resolver,watchCallback:this.__onResolverForHeaderItemsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForHeaderItemsWatchCallback)})}__onResolverForHeaderItemsWatchCallback(data){this.__isAttached||this.__suspendObjectResolver("headerItems"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__headerItems)||(this.__destroyHeaderItems(),this.__headerItems=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"HeaderItems"}),this.__processHeaderItems()):TcHmi.Log.Controls.error(this,TcHmiHeader.#tchmiFQN,{Attribute:"HeaderItems"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getHeaderItems(){return this.__headerItems}__processHeaderItems(){if(!this.__headerItems)return;let randomId=0;for(let item of this.__headerItems)item.id="headeritem_"+randomId,randomId++;this.__isAttached&&(this.__createHeaderElements(),this.__resizeControl())}setExpandable(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Expandable")),convertedValue!==this.__expandable&&(this.__expandable=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Expandable"}))}getExpandable(){return this.__expandable}}})();export{TcHmiHeader};TcHmi.Controls.registerEx("TcHmiHeader","TcHmi.Controls.BaseTemplate",TcHmiHeader,{injectInGlobalObject:!0});